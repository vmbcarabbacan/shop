"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2834],{2834:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var s=n(629);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o={name:"samsAttendance",data:function(){return{notes:null,loading:!1,statuses:["P","A"]}},methods:r(r(r({},(0,s.nv)(["SAMS_UPDATE_ATTENDANCE"])),(0,s.OI)(["SAMS_OPEN_ATTENDANCE"])),{},{close:function(){this.SAMS_OPEN_ATTENDANCE()},print:function(){this.$print("attendance")},save:function(){var e=this;this.loading=!0,this.SAMS_UPDATE_ATTENDANCE({attendance:this.schedule.enrollment.enrolled,notes:this.notes,schedule_id:this.schedule.enrollment.schedule_id,date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)}).then((function(t){e.notes=null,e.loading=!1}))}}),computed:r({},(0,s.rn)(["sams","schedule"]))};const a=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{model:{value:e.sams.openAttendance,callback:function(t){e.$set(e.sams,"openAttendance",t)},expression:"sams.openAttendance"}},[n("v-card",[n("v-toolbar",{attrs:{flat:"",dark:"",color:"success"}},[n("v-toolbar-title",[e._v("\n                Attendance - "+e._s(e._f("toUpper")(e.schedule.enrollment.schedule.product))+" - "+e._s(e._f("toUpper")(e.schedule.enrollment.schedule.teacher))+"\n            ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-icon",{on:{click:e.close}},[e._v("mdi-close")])],1),e._v(" "),n("v-card-text",[n("v-simple-table",{attrs:{"fixed-header":"",height:"100%"},scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v("Timings")]),e._v(" "),e._l(e.schedule.enrollment.dates,(function(t,s){return n("th",{key:s,staticClass:"text-left"},[e._v("\n                        "+e._s(t)+"\n                    ")])}))],2)]),e._v(" "),n("tbody",e._l(e.schedule.enrollment.enrolled,(function(t,s){return n("tr",{key:s},[n("td",[e._v(e._s(e._f("toUpper")(t.fullname)))]),e._v(" "),e._l(t.attendance,(function(t,s){return n("td",{key:s},[e._l(e.schedule.enrollment.dates,(function(s,l){return[n("div",{key:l},[s===t.date?n("v-combobox",{attrs:{items:e.statuses},model:{value:t.status,callback:function(n){e.$set(t,"status",n)},expression:"day.status"}}):e._e()],1)]}))],2)}))],2)})),0)]},proxy:!0}])}),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-textarea",{attrs:{label:"add notes"},model:{value:e.notes,callback:function(t){e.notes=t},expression:"notes"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-timeline",{attrs:{dense:""}},e._l(e.schedule.enrollment.notes,(function(t,s){return n("v-timeline-item",{key:s,attrs:{icon:"mdi-chart-timeline",color:"success",small:"","fill-dot":""}},[n("v-card",{attrs:{color:"success",dark:""}},[n("v-card-title",{staticClass:"text-h6"},[e._v("\n                                "+e._s(t.date)+"\n                                ")]),e._v(" "),n("v-card-text",{staticClass:"white text--primary"},[n("p",{domProps:{innerHTML:e._s(t.notes)}})])],1)],1)})),1)],1)],1),e._v(" "),n("v-simple-table",{staticClass:"d-none",attrs:{"fixed-header":"",height:"100%",id:"attendance"},scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{attrs:{colspan:e.schedule.enrollment.dates.length+1}},[n("h2",[e._v(e._s(e._f("toUpper")(e.schedule.enrollment.schedule.product))+" ")]),e._v(" "),n("h2",[e._v(e._s(e._f("toUpper")(e.schedule.enrollment.schedule.teacher)))]),e._v(" "),n("h2",[e._v(e._s(e.schedule.enrollment.schedule.time_start)+" - "+e._s(e.schedule.enrollment.schedule.time_end))]),e._v(" "),n("h2",[e._v(e._s(e._f("toUpper")(e.schedule.enrollment.schedule.location)))]),e._v(" "),n("h2",[e._v(e._s(e.schedule.enrollment.schedule.weekday))]),e._v(" "),n("h2",[e._v(e._s(e.schedule.enrollment.schedule.studio))])])]),e._v(" "),n("tr",[n("th",{staticClass:"text-left"},[e._v("Timings")]),e._v(" "),e._l(e.schedule.enrollment.dates,(function(t,s){return n("th",{key:s,staticClass:"text-left",staticStyle:{width:"5vh"}},[e._v("\n                        "+e._s(t)+"\n                    ")])}))],2)]),e._v(" "),n("tbody",e._l(e.schedule.enrollment.enrolled,(function(t,s){return n("tr",{key:s},[n("td",[e._v(e._s(e._f("toUpper")(t.fullname)))]),e._v(" "),e._l(t.attendance,(function(t,s){return n("td",{key:s,staticClass:"text-center"},[e._l(e.schedule.enrollment.dates,(function(s,l){return[n("div",{key:l},[s===t.date?n("p",{domProps:{innerHTML:e._s(t.status)}}):e._e()])]}))],2)}))],2)})),0)]},proxy:!0}])})],1),e._v(" "),n("v-card-actions",[n("v-btn",{staticClass:"text-none success",on:{click:e.print}},[e._v("\n                print\n            ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"text-none success",attrs:{loading:e.loading},on:{click:e.save}},[e._v("\n                Save\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);