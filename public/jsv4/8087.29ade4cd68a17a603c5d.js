"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8087],{8087:(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});var a=n(629);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c={name:"posSearch",data:function(){return{search:null,page:1,perPage:20,type:"Sale ID",types:["Sale ID","Customer"],openBar:!1}},created:function(){this.paginate(this.page)},methods:r(r(r({},(0,a.nv)(["SALES","SALE","SALE_UPDATE"])),(0,a.OI)(["POS_SEARCH_BY_SALE_ID","POS_REQUEST_AMEND_SALE","POS_AMENDED_ID"])),{},{paginate:function(t){this.page=t,this.SALES({page:t,search:this.search,type:this.type,perPage:this.perPage})},checkSaleCompleted:function(t){var e=this;this.SALE_UPDATE({id:t,status:"Completed"}).then((function(t){e.paginate(e.page),e.openBar=!0}))},requestUpdate:function(t){this.POS_AMENDED_ID(t),this.POS_REQUEST_AMEND_SALE()},searchSchedule:function(){this.paginate(1)},checkSaleById:function(t){this.$router.push({name:"POSFilter",params:{id:t}}),this.SALE({id:t}),this.close()},close:function(){this.POS_SEARCH_BY_SALE_ID()}}),computed:r({},(0,a.rn)(["pos","sales","registration"]))};const i=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{width:"1200"},on:{"click:outside":t.close},model:{value:t.pos.isSearchSale,callback:function(e){t.$set(t.pos,"isSearchSale",e)},expression:"pos.isSearchSale"}},[n("v-card",[n("v-toolbar",{staticClass:"primary text-none",attrs:{flat:"",dark:""}},[n("v-toolbar-title",[t._v("\n                View Sales\n            ")])],1),t._v(" "),n("v-card-text",{staticClass:"mt-6"},[n("v-text-field",{attrs:{solo:"",clearable:"",label:"search "+("Sale ID"==t.type?"sale id":"customer")},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchSchedule.apply(null,arguments)}},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-btn",{attrs:{icon:""},on:{click:t.searchSchedule}},[n("v-icon",{attrs:{left:""}},[t._v("\n                        mdi-magnify\n                        ")])],1)]},proxy:!0},{key:"prepend-inner",fn:function(){return[n("v-combobox",{staticStyle:{"border-right":"solid #000"},attrs:{shaped:"",solo:"",flat:"",items:t.types,label:"Select Type","hide-details":""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),n("v-simple-table",{attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("\n                        Transaction\n                    ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                        Customer\n                    ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                        Total\n                    ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                        Status\n                    ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                        Date\n                    ")]),t._v(" "),n("th",{staticClass:"text-left"})])]),t._v(" "),n("tbody",t._l(t.sales.sales.data,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.id))]),t._v(" "),n("td",[t._v(t._s(t._f("toUpper")(e.name)))]),t._v(" "),n("td",[t._v(t._s(e.total))]),t._v(" "),n("td",[t._v(t._s(e.status))]),t._v(" "),n("td",[t._v(t._s(t._f("dateAndTime")(e.purchase_date)))]),t._v(" "),n("td",["Admin"==t.registration.form.role?[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on,r=a.attrs;return["Pending"==e.status?n("v-btn",t._g(t._b({attrs:{icon:"",color:"green"},on:{click:function(n){return t.checkSaleCompleted(e.id)}}},"v-btn",r,!1),s),[n("v-icon",[t._v("\n                                            mdi-cart-check\n                                        ")])],1):t._e()]}}],null,!0)},[t._v(" "),n("span",[t._v("Complete transaction")])])]:t._e(),t._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on,r=a.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(n){return t.checkSaleById(e.id)}}},"v-btn",r,!1),s),[n("v-icon",[t._v("\n                                        mdi-magnify\n                                    ")])],1)]}}],null,!0)},[t._v(" "),n("span",[t._v("View Transaction Details")])]),t._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on,r=a.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(n){return t.requestUpdate(e.id)}}},"v-btn",r,!1),s),[n("v-icon",[t._v("\n                                        mdi-calendar-question\n                                    ")])],1)]}}],null,!0)},[t._v(" "),n("span",[t._v("Request to amend")])])],2)])})),0)]},proxy:!0}])}),t._v(" "),n("div",{staticClass:"text-center"},[n("v-pagination",{attrs:{length:t.sales.sales.last_page,circle:""},on:{input:t.paginate},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1),t._v(" "),n("v-snackbar",{attrs:{color:"deep-purple accent-4",top:"",right:"",absolute:""},model:{value:t.openBar,callback:function(e){t.openBar=e},expression:"openBar"}},[t._v("\n            Succesful!\n        ")])],1)],1)}),[],!1,null,null,null).exports}}]);