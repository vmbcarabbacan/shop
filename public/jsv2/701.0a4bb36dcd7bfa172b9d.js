"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[701],{701:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var s=a(629);function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const o={name:"accountTransactions",created:function(){var t=this,e=parseInt(this.$route.query.page);this.page=e,setTimeout((function(){t.paginate(e)}),1e3)},data:function(){return{page:1,openTransactionItem:!1}},methods:i(i(i({},(0,s.nv)(["SALES","SALE","CHECKOUT_PAYMENT_UPDATE"])),(0,s.OI)(["SALE_M"])),{},{viewHistory:function(t){this.user_id=this.registration.form.id,this.paginate(1)},paginate:function(t){var e=this,a=Object.keys(this.$route.query).length>0?t:1;this.$router.replace({query:{page:a}}).catch((function(t){"NavigationDuplicated"===t.name||t.message.includes("Avoided redundant navigation to current location")||console.log(t)})),this.SALES({page:t,search:this.registration.form.id,type:"User ID",perPage:20}).then((function(t){e.openTransaction=!0}))},checkSaleById:function(t){var e=this;this.SALE({id:t}).then((function(t){e.openTransactionItem=!0}))},closeTransactionItem:function(){this.SALE_M({mom:{},payment:[],item:[],total:{},address:null,notes:null,telr:null,pay:[]}),this.openTransactionItem=!1},paynow:function(t){var e=this;"Pending"==t.status&&this.SALE({id:t.id}).then((function(t){e.CHECKOUT_PAYMENT_UPDATE({id:e.sales.sale.id,item:e.sales.sale.item,payment:e.sales.sale.payment,mom:e.sales.sale.mom,link:!0,notes:e.sales.sale.notes,total:e.sales.sale.total,address:e.registration.form.address}).then((function(t){location.href=e.sales.sale.link}))}))}}),computed:i({},(0,s.rn)(["registration","sales"]))};const c=(0,a(1900).Z)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",md:"10"}},[a("v-card",[a("v-card-text",[a("v-simple-table",{attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("\n                            Transaction#\n                        ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                            Total\n                        ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                            Date\n                        ")]),t._v(" "),a("th",{staticClass:"text-left"})])]),t._v(" "),a("tbody",t._l(t.sales.sales.data,(function(e,s){return"Cancelled"!=e.status?a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(e.total))]),t._v(" "),a("td",[t._v(t._s(t._f("dateAndTime")(e.purchase_date)))]),t._v(" "),a("td",[a("v-btn",{staticClass:"text-none",attrs:{outlined:"",color:"Completed"==e.status?"#00cc00":"Cancelled"==e.status?"#ffff00":"Refund"==e.status?"#c2c2a3":"#ff0000"},on:{click:function(a){return t.paynow(e)}}},[t._v("\n                                "+t._s(e.status)+"\n                            ")]),t._v(" "),a("v-icon",{on:{click:function(a){return t.checkSaleById(e.id)}}},[t._v("\n                                mdi-magnify\n                            ")])],1)]):t._e()})),0)]},proxy:!0}])})],1)],1),t._v(" "),a("div",{staticClass:"text-center"},[a("v-pagination",{attrs:{length:t.sales.sales.last_page,circle:""},on:{input:t.paginate},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),a("v-bottom-sheet",{attrs:{"hide-overlay":"",scrollable:""},on:{"click:outside":t.closeTransactionItem},model:{value:t.openTransactionItem,callback:function(e){t.openTransactionItem=e},expression:"openTransactionItem"}},[a("v-simple-table",{attrs:{width:"100%","fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left",attrs:{width:"60%"}},[a("p",{staticClass:"font-weight-bold red--text"},[t._v("Transacction# "+t._s(t.sales.sale.id)+" - "+t._s(t.sales.sale.status))])]),t._v(" "),a("th",{staticClass:"text-right",attrs:{width:"40%"}},[t._v("\n                            Total\n                        ")])])]),t._v(" "),a("tbody",t._l(t.sales.sale.item,(function(e,s){return a("tr",{key:s},[a("td",[a("span",{staticClass:"text-subtitle-1 font-weight-bold black--text"},[t._v(t._s(t._f("toUpper")(e.item.productName))+" - "),a("span",{staticClass:"text-caption font-weight-thin"},[t._v(t._s(t._f("toUpper")(e.item.pdoName)))])]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"text-caption"},[t._v(t._s(t._f("toUpper")(e.type)))]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"text-caption",attrs:{for:"quantity"}},[t._v("Qty: "+t._s(e.item.quantity))]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"text-caption font-weight-black"},[t._v(" Student: "+t._s(t._f("toUpper")(e.item.student.firstName))+" "+t._s(t._f("toUpper")(e.item.student.familyName))+" ")])]),t._v(" "),a("td",[a("p",{staticClass:"red--text text-right font-weight-bold"},[t._v(t._s(t._f("currency")(e.item.total_price)))])])])})),0)]},proxy:!0}])})],1)],1)],1)}),[],!1,null,null,null).exports}}]);