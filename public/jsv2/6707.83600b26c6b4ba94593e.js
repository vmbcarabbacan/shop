"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6707],{6707:(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});var a=n(629);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const i={name:"viewTransactions",methods:r(r(r({},(0,a.nv)(["REQUEST_PROCESS_TRANSACTION","REQUEST_PROCESS_PRODUCT_OPTION","REQUEST_PROCESS_CHANGE_PAYMENT_OPTION"])),(0,a.OI)(["REQUEST_OPEN_TRANSACTION"])),{},{proceed:function(t){this.REQUEST_PROCESS_TRANSACTION({filter:this.request.transaction,status:t})},proceedProductOption:function(t){this.REQUEST_PROCESS_PRODUCT_OPTION({filter:this.request.transaction,status:t})},proceedChangePayment:function(t){this.REQUEST_PROCESS_CHANGE_PAYMENT_OPTION({filter:this.request.transaction,status:t})},close:function(){this.REQUEST_OPEN_TRANSACTION()}}),computed:r({},(0,a.rn)(["request"]))};const o=(0,n(1900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{width:"600",persistent:""},model:{value:t.request.openTransaction,callback:function(e){t.$set(t.request,"openTransaction",e)},expression:"request.openTransaction"}},[n("v-card",[n("v-toolbar",{attrs:{flat:"",dark:"",color:"blue accent-2"}},[n("v-toolbar-title",[t._v("\n                "+t._s(t._f("toUpper")(t.request.transaction.type))+"\n            ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-icon",{on:{click:t.close}},[t._v("\n                mdi-close\n            ")])],1),t._v(" "),"complete transaction"===t.request.transaction.type||"cancelled transaction"===t.request.transaction.type||"refund transaction"===t.request.transaction.type?[n("v-card-text",[n("div",[n("p",{staticStyle:{"text-align":"center"}},[t._v("\n                        Invoice #:  "+t._s(t.request.transaction.item.id)+"\n                        ")]),t._v(" "),n("hr"),t._v(" "),n("p",{staticStyle:{"text-align":"center"}},[t._v("\n                        Date Purchased: "+t._s(t._f("dateAndTime")(t.request.transaction.item.created_at))+"\n                        ")]),t._v(" "),n("v-simple-table",{staticClass:"overflow-x-auto",attrs:{height:"450",width:"100%","fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"}),t._v(" "),n("th",{staticClass:"text-right"},[t._v("\n                                    Total\n                                ")])])]),t._v(" "),n("tbody",t._l(t.request.transaction.item.item,(function(e,a){return n("tr",{key:a},[n("td",[n("span",{staticClass:"text-caption"},[t._v(t._s(t._f("toUpper")(e.item.productName))+" - "),n("span",{staticClass:"text-caption font-weight-thin"},[t._v(t._s(t._f("toUpper")(e.item.pdoName)))])]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"text-caption"},[t._v(t._s(t._f("toUpper")(e.type)))]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"text-caption",attrs:{for:"quantity"}},[t._v("Qty: "+t._s(e.item.quantity))]),t._v(" "),n("br"),t._v(" "),"Lessons"==e.type?n("span",{staticClass:"text-caption"},[t._v(t._s(t._f("toUpper")(e.item.student.firstName))+" "+t._s(t._f("toUpper")(e.item.student.familyName)))]):t._e()]),t._v(" "),n("td",[n("p",{staticClass:"red--text text-right font-weight-bold"},[t._v(t._s(t._f("currency")(e.item.total_price)))])])])})),0),t._v(" "),n("tfoot",[n("tr",[n("td",[n("p",{staticClass:"text-left black--text"},[n("span",[t._v("Subtotal "),n("br")]),t._v(" "),n("span",[t._v("Tax "),n("br")]),t._v(" "),t.request.transaction.item.total.disc>0?n("span",[t._v("Discount "),n("br")]):t._e(),t._v(" "),n("span",[t._v("Total")])])]),t._v(" "),n("td",[n("p",{staticClass:"black--text text-right font-weight-bold"},[n("span",[t._v(t._s(t._f("currency")(t.request.transaction.item.total.excl))+" "),n("br")]),t._v(" "),n("span",[t._v(t._s(t._f("currency")(t.request.transaction.item.total.tax))+" "),n("br")]),t._v(" "),t.request.transaction.item.total.disc>0?n("span",[t._v(t._s(t._f("currency")(t.request.transaction.item.total.disc))+" "),n("br")]):t._e(),t._v(" "),n("span",[t._v(t._s(t._f("currency")(t.request.transaction.item.total.total))+" "),n("br")])])])]),t._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[t._v("\n                                    Comment: "+t._s(t.request.transaction.comment)+"\n                                ")])])])]},proxy:!0}],null,!1,1560290551)})],1)]),t._v(" "),n("v-card-actions",[n("v-btn",{staticClass:"text-none success",attrs:{loading:t.request.loading},on:{click:function(e){return t.proceed("Completed")}}},[t._v("\n                    Proceed to "+t._s("complete transaction"===t.request.transaction.type?"Complete":"cancelled transaction"===t.request.transaction.type?"Cancel":"Refund")+" transaction\n                ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"text-none danger",attrs:{loading:t.request.loading},on:{click:function(e){return t.proceed("Cancelled")}}},[t._v("\n                    Decline request\n                ")])],1)]:"add quantity"===t.request.transaction.type||"deduct quantity"===t.request.transaction.type||"amend price"===t.request.transaction.type?[n("v-card-text",[n("p",{staticClass:"text-h6"},[t._v("Product: "+t._s(t.request.transaction.item.product.name)+" - "+t._s(t.request.transaction.item.name))]),t._v(" "),n("p",{staticClass:"text-h6"},[t._v(t._s("amend price"===t.request.transaction.type?"Price":"Quantity")+" : "+t._s(t.request.transaction.item.value))]),t._v(" "),n("p",{staticClass:"text-h6"},[t._v("Comment: "+t._s(t.request.transaction.comment))])]),t._v(" "),n("v-card-actions",[n("v-btn",{staticClass:"text-none success",attrs:{loading:t.request.loading},on:{click:function(e){return t.proceedProductOption("Completed")}}},[t._v("\n                    Proceed to update\n                ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"text-none danger",attrs:{loading:t.request.loading},on:{click:function(e){return t.proceedProductOption("Cancelled")}}},[t._v("\n                    Decline request\n                ")])],1)]:[n("v-card-text",[n("div",[n("p",{staticStyle:{"text-align":"center"}},[t._v("\n                        Invoice #:  "+t._s(t.request.transaction.item.id)+"\n                        ")]),t._v(" "),n("hr"),t._v(" "),n("p",{staticStyle:{"text-align":"center"}},[t._v("\n                        Date Purchased: "+t._s(t._f("dateAndTime")(t.request.transaction.item.created_at))+"\n                        ")]),t._v(" "),n("v-simple-table",{staticClass:"overflow-x-auto",attrs:{height:"450",width:"100%","fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"}),t._v(" "),n("th",{staticClass:"text-right"},[t._v("\n                                    Total\n                                ")])])]),t._v(" "),n("tbody",t._l(t.request.transaction.item.item,(function(e,a){return n("tr",{key:a},[n("td",[n("span",{staticClass:"text-caption"},[t._v(t._s(t._f("toUpper")(e.item.productName))+" - "),n("span",{staticClass:"text-caption font-weight-thin"},[t._v(t._s(t._f("toUpper")(e.item.pdoName)))])]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"text-caption"},[t._v(t._s(t._f("toUpper")(e.type)))]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"text-caption",attrs:{for:"quantity"}},[t._v("Qty: "+t._s(e.item.quantity))]),t._v(" "),n("br"),t._v(" "),"Lessons"==e.type?n("span",{staticClass:"text-caption"},[t._v(t._s(t._f("toUpper")(e.item.student.firstName))+" "+t._s(t._f("toUpper")(e.item.student.familyName)))]):t._e()]),t._v(" "),n("td",[n("p",{staticClass:"red--text text-right font-weight-bold"},[t._v(t._s(t._f("currency")(e.item.total_price)))])])])})),0),t._v(" "),n("tfoot",[n("tr",[n("td",[n("p",{staticClass:"text-left black--text"},[n("span",[t._v("Subtotal "),n("br")]),t._v(" "),n("span",[t._v("Tax "),n("br")]),t._v(" "),t.request.transaction.item.total.disc>0?n("span",[t._v("Discount "),n("br")]):t._e(),t._v(" "),n("span",[t._v("Total")])])]),t._v(" "),n("td",[n("p",{staticClass:"black--text text-right font-weight-bold"},[n("span",[t._v(t._s(t._f("currency")(t.request.transaction.item.total.excl))+" "),n("br")]),t._v(" "),n("span",[t._v(t._s(t._f("currency")(t.request.transaction.item.total.tax))+" "),n("br")]),t._v(" "),t.request.transaction.item.total.disc>0?n("span",[t._v(t._s(t._f("currency")(t.request.transaction.item.total.disc))+" "),n("br")]):t._e(),t._v(" "),n("span",[t._v(t._s(t._f("currency")(t.request.transaction.item.total.total))+" "),n("br")])])])]),t._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[t._v("\n                                    Comment: "+t._s(t.request.transaction.comment)+"\n                                ")])]),t._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[t._v("\n                                    Change payment to:\n                                ")])]),t._v(" "),t._l(t.request.transaction.item.payments,(function(e,a){return n("tr",{key:a},[n("td",{staticClass:"text-left black--text"},[t._v(" "+t._s(e.payment)+" ")]),t._v(" "),n("td",{staticClass:"black--text text-right font-weight-bold"},[t._v(" "+t._s(e.value))])])}))],2)]},proxy:!0}])})],1)]),t._v(" "),n("v-card-actions",[n("v-btn",{staticClass:"text-none success",attrs:{loading:t.request.loading},on:{click:function(e){return t.proceedChangePayment("Completed")}}},[t._v("\n                    Proceed\n                ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"text-none danger",attrs:{loading:t.request.loading},on:{click:function(e){return t.proceedChangePayment("Cancelled")}}},[t._v("\n                    Decline request\n                ")])],1)]],2)],1)}),[],!1,null,null,null).exports}}]);