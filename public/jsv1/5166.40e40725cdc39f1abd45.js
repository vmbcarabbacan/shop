"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5166],{5166:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(629);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a={name:"login",data:function(){return{show_password:!1,valid:!1,status:"Next"}},methods:o(o(o({},(0,r.OI)(["LOGIN_OPEN","LOGIN_ERROR","LOGIN_FORM","LOGIN_LOADING","REGISTRATION_FORM"])),(0,r.nv)(["REGISTRATION_VERIFY_EMAIL","LOGIN","CART_UPDATE_USER"])),{},{changeEmail:function(){this.status="Next"},signIn:function(){switch(this.LOGIN_LOADING(!0),this.LOGIN_ERROR(null),this.status){case"Next":this.verify();break;case"Login":this.tryLogin()}},createNewAccount:function(){var e={id:0,location:"motor city",children:[{id:0,firstName:null,familyName:null,gender:"Female",dateOfBirth:null,dob_open:!1,isSelected:!0}],mom:{firstName:null,familyName:null,nationality:null,mobileNumber:null,homeNumber:null,workNumber:null,company:null,emailAddress:this.login.form.emailAddress},dad:{firstName:null,familyName:null,nationality:null,mobileNumber:null,homeNumber:null,workNumber:null,company:null,emailAddress:null},password:null,confirm_password:null};this.REGISTRATION_FORM(e),this.$router.push({name:"Registration"}),this.close()},verify:function(){var e=this,t={email:this.login.form.emailAddress};this.REGISTRATION_VERIFY_EMAIL(t).then((function(t){e.status="Login",e.LOGIN_LOADING(!1)})).catch((function(t){e.LOGIN_LOADING(!1),e.LOGIN_ERROR("Email not found")}))},tryLogin:function(){var e=this,t={email:this.login.form.emailAddress,password:this.login.form.password};this.LOGIN(t).then((function(t){var n={user_id:t.data.user.id,carts:e.cart.carts,wishlist:e.cart.wishlist};e.CART_UPDATE_USER(n),e.cart.isProceed&&e.$router.push({name:"Checkout"}),e.LOGIN_LOADING(!1),e.close()})).catch((function(t){e.LOGIN_LOADING(!1)}))},close:function(){this.LOGIN_FORM({email:null,password:null}),this.LOGIN_ERROR(null),this.LOGIN_OPEN(!1),this.status="Next"}}),computed:o({},(0,r.rn)(["login","registration","cart"]))},l=a;const c=(0,n(1900).Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"400"},on:{"click:outside":e.close},model:{value:e.login.open,callback:function(t){e.$set(e.login,"open",t)},expression:"login.open"}},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.signIn.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card",{attrs:{loading:e.login.loading}},[n("v-toolbar",{attrs:{dense:"",color:"blue darken-2",dark:""}},[n("v-toolbar-title",[e._v("\n                    Sign in\n                ")])],1),e._v(" "),"Next"==e.status?n("v-card-text",[n("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.login.error,expression:"login.error"}],staticClass:"mb-5",attrs:{value:!0,color:"error"}},[e._v("\n                    "+e._s(e.login.error)+"\n                ")]),e._v(" "),n("v-text-field",{attrs:{label:"Email Address",rules:[function(e){return/.+@.+/.test(e)||"Incorrect email address"}]},model:{value:e.login.form.emailAddress,callback:function(t){e.$set(e.login.form,"emailAddress",t)},expression:"login.form.emailAddress"}}),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.login.error,expression:"login.error"}],staticClass:"text-none",attrs:{text:""},on:{click:e.createNewAccount}},[e._v("\n                    Create new account?\n                ")])],1):e._e(),e._v(" "),"Login"==e.status?n("v-card-text",[n("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.login.error,expression:"login.error"}],staticClass:"mb-5",attrs:{value:!0,color:"error"}},[e._v("\n                    "+e._s(e.login.error)+"\n                ")]),e._v(" "),n("p",[e._v("\n                    "+e._s(e.login.form.emailAddress)+"\n                    "),n("v-btn",{staticClass:"text-none",attrs:{text:""},on:{click:e.changeEmail}},[e._v("\n                    Change email address?\n                    ")])],1),e._v(" "),n("v-text-field",{attrs:{label:"password",rules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length>7||"Password must not less than 8 characters"}],"append-icon":e.show_password?"mdi-eye":"mdi-eye-off",type:e.show_password?"text":"password"},on:{"click:append":function(t){e.show_password=!e.show_password}},model:{value:e.login.form.password,callback:function(t){e.$set(e.login.form,"password",t)},expression:"login.form.password"}}),e._v(" "),n("a",{attrs:{href:"/reset-password"}},[e._v(" Reset Password ")])],1):e._e(),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"primary text-none",attrs:{type:"submit",loading:e.login.loading,disabled:!e.valid}},[e._v("\n                "+e._s(e.status)+"\n            ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);